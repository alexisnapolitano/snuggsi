#!/usr/bin/env bash

# https://stackoverflow.com/questions/192249/how-do-i-parse-command-line-arguments-in-bash

# for i in `seq 1 10`
#   do
#     echo $i
#   done


menu () {
  echo
  echo "CLI (Command Line Interface) Usage:"
  echo
  echo " $ snuggsi <command>"
  echo
  echo "where <command> is one of the following:"
  echo
  echo "  test                   Test suite runner."
  echo "  crank                  Crank it up baby!"
  echo "  integrate              Used during Continuous Integration."
  echo
}


test $# -eq 0 && menu

for argument in "$@"
  do
    case $argument in

      -help)
        menu
        # shift # past key
        # shift # past value
        ;;

      -4k)
        declare -ir WIDTH=3840
        declare -ir HEIGHT=2160
        shift # past argument AND value
        ;;

      -hd)
        declare -ir WIDTH=1920
        declare -ir HEIGHT=1080
        shift # past argument AND value
        ;;

      -input=*)
        declare -r INPUT="${argument#*=}"
        shift # past argument AND value
        ;;

      -letterbox*)
        declare -r MATTE=$( [[ $argument =~ ^-letterbox$ ]] && echo "black" || echo ${argument#*=})
        shift # past argument AND value
        ;;

      -passes=*)
        declare -ir PASSES=${argument#*=}
        shift # past argument AND value
        ;;

      -start=*)
        declare -r START=${argument#*=}
        shift # past argument AND value
        ;;

      -stop=*)
        declare -r STOP=${argument#*=}
        shift # past argument AND value
        ;;

      -stats)
        source $BIN/.stats
        shift # past argument AND value
        ;;

      -watermark=*)
        declare -r WATERMARK="${argument#*=}"
        shift # past argument AND value
        ;;

      -input|-letterbox|-passes|-start|-stop|-watermark)
        echo "$1 requires a value to be set (i.e. $1=value)" >&2
        exit 1
        ;;

      -*)
        echo "unknown option: $1" >&2
        exit 1
        ;;

      *)
        declare -r OUTPUT="$1"
        ;;
    esac
  done
