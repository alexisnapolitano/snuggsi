#!/usr/bin/env bash

echo
echo "  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ "
echo "  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„                  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ "
echo "  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„     snuggsi ãƒ„   ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ "
echo "  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„                  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ "
echo "  ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ãƒ„ "

declare -r ENTRY=`dirname $(readlink $BASH_SOURCE)`
declare -rx BIN=$(cd `dirname $BASH_SOURCE`/$ENTRY; pwd)
declare -rx SNUGGSI=$(dirname $BIN)
declare -r COMMAND="$BIN/$1"
declare -rx RESOURCES=("${@:2}")


function execute {
  echo
  echo "ðŸ“š  EXECUTING RESOURCES â€¦"
  echo
  printf ' ðŸ‘‰  ðŸ“—  %s\n' "${RESOURCES[@]}"
  echo


  for RESOURCE in ${RESOURCES[@]}
    do
      if test -d $RESOURCE

        then
          $COMMAND $RESOURCE
        else
          echo "ðŸ”´  $RESOURCE NOT A DIRECTORY"

      fi
    done
}


if test -f $COMMAND && \
   test snuggsi != "$1"

  then
    execute
  else
    echo "ðŸ”´  Invalid command"

fi

echo
